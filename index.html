<script>
    const CONFIG = {
        // 새로 알려주신 최신 토큰입니다.
        NOTION_TOKEN: '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',
        
        // 주소창에서 확인한 정확한 DB ID입니다.
        DATABASE_ID: '2f7dd77690a780889d4fe79d9f831108'
    };

    // ... (이하 addTodo 함수 내 fetch 부분) ...
    async function addTodo() {
        // (기존 코드와 동일)
        try {
            const res = await fetch('/api/record', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    title: text, 
                    completed: false,
                    databaseId: CONFIG.DATABASE_ID,
                    notionToken: CONFIG.NOTION_TOKEN
                })
            });
            
            if (res.ok) {
                document.getElementById('status-msg').innerText = "노션 저장 완료! ♥";
            } else {
                const errData = await res.json();
                console.error("에러 내용:", errData);
                document.getElementById('status-msg').innerText = "저장 실패 (권한 재확인)";
            }
        } catch (e) {
            document.getElementById('status-msg').innerText = "네트워크 에러";
        }
    }
</script>
